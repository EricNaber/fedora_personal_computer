#!/bin/bash
project="Prodora"
version=35
mkdir -p /media/NAS/Cache;
mkdir -p /media/RAM;
# mount -t tmpfs -o size=35G RAM /media/RAM/;
rm -rf /media/RAM/ISO;
mkdir -p /media/SSD/tmp;
dnf -y install createrepo lorax pykickstart;
systemd-inhibit dnf -y install --downloadonly --installroot /media/NAS/Cache/ --releasever=35 @admin-tools @anaconda-tools @base-x @container-management @core @development-tools @editors @firefox @fonts @gnome-desktop @guest-desktop-agents @hardware-support @libreoffice @multimedia @networkmanager-submodules @office @printing @sound-and-video @system-tools @workstation-product-environment HandBrake HandBrake-gui NetworkManager-* age alacarte anaconda anaconda-live asciinema audacious audacious-plugins-freeworld audacity-freeworld backintime-qt baobab bijiben blivet-gui borgbackup borgmatic brasero calibre certbot chkconfig chromium-freeworld clementine cockpit cockpit-machines cockpit-networkmanager cockpit-packagekit cockpit-storaged cockpit-system darktable dbus-x11 ddrescue dialect digikam distribution-gpg-keys distribution-gpg-keys-copr dnf-automatic dnf-plugin-system-upgrade dracut-config-generic dracut-live dvdisaster efibootmgr evince evolution exfat-utils fdupes ffmpeg filezilla firefox flatpak freerdp gedit gimp gimp-heif-plugin gimp-jxl-plugin gimp-lensfun gimp-resynthesizer git-all glibc-all-langpacks gmic-gimp gnome-books gnome-calendar gnome-chess gnome-clocks gnome-contacts gnome-extensions-app gnome-firmware gnome-maps gnome-online-accounts gnome-shell-extension-apps-menu gnome-shell-extension-background-logo gnome-shell-extension-gsconnect gnome-shell-extension-places-menu gnome-shell-extension-system-monitor-applet gnome-terminal gnome-todo gnome-tweaks gnome-usage gnome-weather gnucash gparted grub2 grub2-efi grub2-efi-*-cdboot grub2-efi-ia32 gst gstreamer1* gthumb guestfs-tools htop icedtea-web iftop initscripts inkscape java-openjdk k3b kdenlive keepassxc kernel kernel-modules kernel-modules-extra kid3 krita langpacks-de langpacks-en libaacs libbdplus libbluray-utils libgnome-keyring libheif libimobiledevice-utils libreoffice libtool libva-intel* libva-utils libva-vdpau-driver libvirt marker memtest86+ mesa* nemo nemo-audio-tab nemo-compare nemo-extensions nemo-fileroller nemo-gsconnect nemo-preview nemo-python nemo-seahorse nemo-search-helpers neofetch nmap nutty obs-studio ocl-icd opencl-* p7zip p7zip-plugins pam-u2f pamu2fcfg paperkey pcsc-lite phoronix-test-suite picard plantumlqeditor playonlinux powertop python3-certbot-apache python3-dnf-plugin-local python3-dnf-plugins-extras-snapper qemu remmina reptyr screenfetch seahorse seahorse-nautilus seahorse-sharing sha3sum shim shim-ia32 simplescreenrecorder snapper soundconverter spice-gtk ssss syncthing sysbench syslinux terminator testdisk texlive-plantuml texlive-scheme-full texstudio thunderbird tikzit tldr transmission usbguard usbguard-notifier vim-enhanced virt-manager virt-viewer vlc vulkan* webextension-gsconnect xorgxrdp xrdp youtube-dl;
systemd-inhibit dnf -y install --downloadonly --installroot /media/NAS/Cache/ --releasever=35 generic-logos generic-release generic-release-notes;
createrepo /media/NAS/Cache/
sudo setenforce 0;
# ksflatten --config fedora-livemedia.ks -o fedora-livemedia_flat.ks --version F35;
systemd-inhibit --why "Creation of Prodora" livemedia-creator --make-iso --iso-only --iso-name "${project}-${version}.iso" --no-virt --ks /home/daniel/git/Fedora/fedora-livemedia_flat.ks --tmp /media/SSD/tmp --resultdir /media/RAM/ISO --project ${project} --releasever ${version} --volid "${project} ${version}";
